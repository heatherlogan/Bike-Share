{% extends 'base.html' %}

{% block content %}
<body>

    <h1>Customer page </h1>
    <h6>Username: {{ request.user.username }}<br>
        Email: {{ request.user.email }} <br>
        Amount Owed: £{{ request.user.amount_owed }} <br>
        Hires in Progress: {{ request.user.hires_in_progress }} <br>
        Wallet balance: £{{ request.user.wallet_balance }}<br>
    </h6>

    <button type="button" id="cancel" class="cancelbtn waves-effect waves-light btn" onclick="location.href='{% url 'bikeshare:top-up' %}'">Top Up Balance</button>
    <button type="button" id="cancel" class="cancelbtn waves-effect waves-light btn" onclick="location.href='{% url 'bikeshare:pay-balance' %}'">Pay Balance</button>


    <h3>Rent a Bike</h3>

    {% for station in all_stations %}
        <form action="{% url 'bikeshare:rent_bike' station.id %}" method="post">
            {% csrf_token %}
            <li>Station: {{ station.station_name }} <br>
                Bikes Available: {{ station.number_of_bikes }} <br>

                {% if station.number_of_bikes > 0  %}
                    <button type="submit" name="user_id" value="{{ request.user.id }}">Rent Bike</button><br><br></li>
                {% else %}
                    <a>No bikes available<br></a>
                {% endif %}

        </form>
    {% endfor %}


    <h3>Orders</h3>

    {% for order in customers_orders %}

        {% if not order.is_complete and order.user.pk == request.user.id %}

          <form action="{% url 'bikeshare:return_bike' order.id %}" method="post">
            {% csrf_token %}
            <li>
                User: {{ order.user.username }} <br>
                Bike ID: {{ order.bike.id }} <br>
                Start station: {{ order.start_station }} <br>
                Start time: {{ order.start_time }} <br>

                <input type="submit" name="return_station" value="">Return Bike<br>


          </form>

          <form action="{% url 'bikeshare:report_faulty' order.id %}" method="post">
          {% csrf_token %}
              <input type="submit" name="report_faulty" value="">Report Faulty <br><br>
          </form>

        </li>

        {% endif %}

    {% endfor %}



{% endblock %}



</body>

</html>